angular.module("localStorage",[]).factory("$store",function(e){var t=typeof window.localStorage==="undefined"?undefined:window.localStorage,n=!(typeof t=="undefined"||typeof window.JSON=="undefined");var r=[];var i={parseValue:function(e){var t;try{t=JSON.parse(e);if(typeof t=="undefined"){t=e}if(t=="true"){t=true}if(t=="false"){t=false}if(parseFloat(t)==t&&!angular.isObject(t)){t=parseFloat(t)}}catch(n){return e}return t},onKeyValueChange:function(e){$.Enumerable.From(r).Where(function(t){return t.key===e.key}).ForEach(function(t){if(t.onKeyValueChange!=="undefined"){t.onKeyValueChange(i.parseValue(e.newValue))}})}};var s={set:function(e,r){if(!n){try{$.cookie(e,r);return r}catch(s){console.log("Local Storage not supported, make sure you have the $.cookie supported.")}}var o=JSON.stringify(r);t.setItem(e,o);i.onKeyValueChange({key:e,newValue:r});return i.parseValue(o)},get:function(e){if(!n){try{return i.parseValue($.cookie(e))}catch(r){return null}}var s=t.getItem(e);return i.parseValue(s)},remove:function(e){if(!n){try{$.cookie(e,null);return true}catch(r){return false}}t.removeItem(e);return true},bind:function(t,n,i,o){i=i||"";if(!s.get(n)){s.set(n,i)}e(n).assign(t,s.get(n));t.$watch(n,function(e){s.set(n,e)},true);r.push({scope:t,key:n,def:i,onKeyValueChange:o});return s.get(n)}};window.addEventListener("storage",i.onKeyValueChange,false);return s})